<!DOCTYPE html>
<html>
<head>
	<title>Survey</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
	<h1>Survey</h1>
		Name<br>
		<input type="text" id='name'></input><br>
		Photo<br>
		<input type="text" id='photo'></input>
		<div class="questionDivs">Question #1
			<form id="q1">
				<label><input type="radio" name="q1" value='1'>1</label>
				<label><input type="radio" name="q1" value="2">2</label>
				<label><input type="radio" name="q1" value='3'>3</label>
				<label><input type="radio" name="q1" value="4">4</label>
				<label><input type="radio" name="q1" value='5'>5</label>
			</form>
		</div>
		<div class="questionDivs">Question #2</td>
			<form id="q2">
				<label><input type="radio" name="q2" value='1'>1</label>
				<label><input type="radio" name="q2" value="2">2</label>
				<label><input type="radio" name="q2" value='3'>3</label>
				<label><input type="radio" name="q2" value="4">4</label>
				<label><input type="radio" name="q2" value='5'>5</label>
			</form>
		</div>
		<div class="questionDivs">Question #3</td>
			<form id="q3">
				<label><input type="radio" name="q3" value='1'>1</label>
				<label><input type="radio" name="q3" value="2">2</label>
				<label><input type="radio" name="q3" value='3'>3</label>
				<label><input type="radio" name="q3" value="4">4</label>
				<label><input type="radio" name="q3" value='5'>5</label>
			</form>
		</div>
		<div class="questionDivs">Question #4</td>
			<form id="q4">
				<label><input type="radio" name="q4" value='1'>1</label>
				<label><input type="radio" name="q4" value="2">2</label>
				<label><input type="radio" name="q4" value='3'>3</label>
				<label><input type="radio" name="q4" value="4">4</label>
				<label><input type="radio" name="q4" value='5'>5</label>
			</form>
		</div>
		<div class="questionDivs">Question #5</td>
			<form id="q5">
				<label><input type="radio" name="q5" value='1'>1</label>
				<label><input type="radio" name="q5" value="2">2</label>
				<label><input type="radio" name="q5" value='3'>3</label>
				<label><input type="radio" name="q5" value="4">4</label>
				<label><input type="radio" name="q5" value='5'>5</label>
			</form>
		</div>
		<div class="questionDivs">Question #6</td>
				<form id="q6">
					<label><input type="radio" name="q6" value='1'>1</label>
					<label><input type="radio" name="q6" value="2">2</label>
					<label><input type="radio" name="q6" value='3'>3</label>
					<label><input type="radio" name="q6" value="4">4</label>
					<label><input type="radio" name="q6" value='5'>5</label>
				</form>
			</div>
			<div class="questionDivs">Question #7</td>
				<form id="q7">
					<label><input type="radio" name="q7" value='1'>1</label>
					<label><input type="radio" name="q7" value="2">2</label>
					<label><input type="radio" name="q7" value='3'>3</label>
					<label><input type="radio" name="q7" value="4">4</label>
					<label><input type="radio" name="q7" value='5'>5</label>
				</form>
			</div>
			<div class="questionDivs">Question #8</td>
				<form id="q8">
					<label><input type="radio" name="q8" value='1'>1</label>
					<label><input type="radio" name="q8" value="2">2</label>
					<label><input type="radio" name="q8" value='3'>3</label>
					<label><input type="radio" name="q8" value="4">4</label>
					<label><input type="radio" name="q8" value='5'>5</label>
				</form>
			</div>
			<div class="questionDivs">Question #9</td>
				<form id="q9">
					<label><input type="radio" name="q9" value='1'>1</label>
					<label><input type="radio" name="q9" value="2">2</label>
					<label><input type="radio" name="q9" value='3'>3</label>
					<label><input type="radio" name="q9" value="4">4</label>
					<label><input type="radio" name="q9" value='5'>5</label>
				</form>
			</div>
			<div class="questionDivs">Question #10</td>
				<form id="q10">
					<label><input type="radio" name="q10" value='1'>1</label>
					<label><input type="radio" name="q10" value="2">2</label>
					<label><input type="radio" name="q10" value='3'>3</label>
					<label><input type="radio" name="q10" value="4">4</label>
					<label><input type="radio" name="q10" value='5'>5</label>
				</form>
			</div>
			<button id="submit">Submit</button>
	<a href="/"><button id="home_click">Home</button></a>
	<a href="/api/friends">API Table Link</a>	

	<script type="text/javascript">

		$("#submit").on("click", function(event) {
      event.preventDefault();
      var scoreArr = [];

      for (var i = 1; i < 11; i++) {
      	var selected = $("input:radio[name=q" +i+ "]:checked").val() 
      	if (selected != undefined) {
      	scoreArr.push(selected);
      	}
      };

      var newSurvey = {
      	name: $('#name').val().trim(),
      	photo: $('#photo').val().trim(),
      	scores: scoreArr
      };
      

			if (newSurvey.name == "" || newSurvey.photo == "" || newSurvey.scores.length < 9)
			{
				alert('Please answer all of the questions and/or fill out all of the fields');
			} else {
				$.post('/api/friends', newSurvey, 
				function(data, error) {
					if (error) throw error;
					console.log('Data sent: ' + newSurvey);
				});	

			};
			// location.reload();
		});
	</script>
</body>
</html>